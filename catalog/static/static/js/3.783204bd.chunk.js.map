{"version":3,"sources":["assets/karmela.png","views/books/BookCard.js","views/books/BookSearch.js","state/shelf.selector.js","containers/BookSearch.container.js","views/basket/BasketItem.js","views/basket/CheckoutModal.js","views/basket/Basket.js","views/books/BorrowedBookCard.js","views/books/MyBorrowed.js","containers/Spinner.js","views/books/PrivateRoute.js","containers/TheContent.js","containers/TheFooter.js","containers/TheHeader.js","containers/TheSidebar.js","containers/TheLayout.js"],"names":["module","exports","BookCard","props","dispatch","useDispatch","getAvailableCount","book","copies","filter","copy","status","length","noCopiesAvailable","accentColor","title","author_names","className","disabled","onClick","bookAddToBasket","BookSearch","searchButtonClicked","onSearchTextChange","inputText","onShelfSelected","selectedShelf","shelves","books","onBookUpdated","currentPage","pageCount","setCurrentPage","totalResults","sm","type","color","name","placeholder","onChange","value","row","md","htmlFor","xs","custom","id","map","shelf","key","updated","activePage","pages","onActivePageChange","getShelfDropDown","state","all","concat","BookSearchContainer","useState","searchTerm","setSearchTerm","setInputText","setSelectedShelf","rowsPerPage","setBookListUpdated","useEffect","shelfGetAll","bookGetSome","useSelector","searchResults","results","count","bookSearchProps","e","target","parseInt","console","log","Math","random","ceil","BasketItem","onRemove","authorNames","CheckoutModal","show","onClose","onConfirm","closeButton","i","Date","now","Basket","showModal","showBasketModal","basketItems","basket","removeFromBasketClicked","bookRemoveFromBasket","checkoutModalProps","bookSetShowModal","bookInstances","forEach","available","push","bookCheckout","BorrowedBookCard","onBookReturned","author","first_name","last_name","join","MyBorrowed","bookGetBorrowed","myBorrowedBooks","borrowed","returnedBook","bookReturn","styles","zIndex","top","right","marginTop","marginRight","Spinner","spinner","style","role","PrivateRoute","Component","component","rest","loggedIn","login","render","to","pathname","from","location","loading","React","memo","fluid","fallback","exact","path","BookEditCreate","fixed","href","rel","TheHeader","sidebarShow","user","me","basketCount","withSubheader","inHeader","val","includes","height","alt","email","shape","useHistory","onShowChange","src","logo","icon","logout","TheLayout"],"mappings":"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","file":"static/js/3.783204bd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/karmela.41a4104d.png\";","import React from 'react';\nimport {\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCardFooter,\n    CLink,\n} from '@coreui/react'\n// import { checkoutBook, reserveBook } from './../../services/book.service';\nimport { bookAddToBasket } from './../../state/book.actions'\nimport { useDispatch } from 'react-redux'\n\nconst BookCard = (props) => {\n    const dispatch = useDispatch()\n\n    // function checkoutClicked() {\n    //     const bookInstanceId = props.book.copies[0].id;\n    //     checkoutBook(bookInstanceId).then((data) => {\n    //         props.updated();\n    //         const newState = dispatch({type: 'add-toast', toast: data})\n    //     });\n    // }\n\n    // function reserveClicked() {\n    //     const bookInstanceId = props.book.copies[0].id;\n    //     reserveBook(bookInstanceId).then((data) => {\n    //         console.log(data);\n    //         props.updated();\n    //         const newState = dispatch({type: 'add-toast', toast: data})\n    //     });\n    // }\n\n    function addToBasketClicked() {\n        dispatch(bookAddToBasket(props.book))\n    }\n\n    function getCopiesCount() {\n        return props.book.copies.length;\n    }\n\n    function getAvailableCount() {\n        return props.book.copies.filter(copy => copy.status === 'a').length;\n    }\n\n    function noCopiesAvailable() {\n        return getAvailableCount() === 0\n    }\n\n    return (\n        <CCard accentColor=\"primary\">\n            <CCardHeader>\n                <h5>{props.book.title}</h5>\n            </CCardHeader>\n            <CCardBody>\n                {props.book.author_names}\n            </CCardBody>\n            <CCardFooter>                \n                <div className=\"d-flex justify-content-between\">\n                    <div>\n                        <div>Copies: {getCopiesCount()}</div>\n                        <div>Available: {getAvailableCount()}</div>\n                    </div>\n                    <div>\n                        {/* <div><CLink onClick={checkoutClicked}>Checkout</CLink></div>\n                        <div><CLink onClick={reserveClicked}>Reserve</CLink></div> */}\n                        <div><CLink disabled={noCopiesAvailable()} className={(noCopiesAvailable() ? 'disabled-link' : null)} onClick={addToBasketClicked}>Add to Basket</CLink></div>\n                    </div>\n                </div> \n            </CCardFooter>\n        </CCard>\n    )\n}\n\nexport default BookCard","import React from 'react'\nimport {\n    CCol,\n    CRow,\n    CPagination,\n    CInput,\n    CInputGroup,\n    CInputGroupPrepend,\n    CButton,\n    CFormGroup,\n    CLabel,\n    CSelect\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport BookCard from './BookCard';\n\nconst BookSearch = ({ searchButtonClicked, onSearchTextChange, inputText, onShelfSelected, selectedShelf, shelves,\n    books, onBookUpdated, currentPage, pageCount, setCurrentPage, totalResults}) => {\n        \n    return (\n        <CRow>\n            <CCol>\n            <h2 className='mb-4'>Book Search</h2>\n                <CRow>\n                    <CCol sm='4'>\n                        <CInputGroup className={'mb-4'}>\n                            <CInputGroupPrepend>\n                                <CButton onClick={searchButtonClicked} type=\"button\" color=\"primary\"><CIcon name=\"cil-magnifying-glass\" /> Search</CButton>\n                            </CInputGroupPrepend>\n                            <CInput placeholder=\"Title or abstract\" onChange={onSearchTextChange} value={inputText}/>\n                        </CInputGroup>\n                    </CCol>\n                    <CCol sm='4'></CCol>\n                    <CCol sm='4'>\n                        <CFormGroup row>\n                            <CCol md=\"3\">\n                                <CLabel htmlFor=\"shelfSelect\" className='pt-1'>Shelf</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"9\">\n                                <CSelect custom name=\"shelfSelect\" id=\"shelfSelect\" onChange={onShelfSelected} value={selectedShelf}>\n                                    {shelves.map((shelf) => {\n                                        return <option value={shelf.id} key={shelf.id}>{shelf.name}</option>\n                                    })}\n                                </CSelect>\n                            </CCol>\n                        </CFormGroup>\n                    </CCol>\n                </CRow>\n\n                <CRow>\n                    \n                    {books.map((book) => {\n                        return <CCol xs=\"12\" sm=\"6\" md=\"4\" key={book.id} >\n                            <BookCard book={book} updated={onBookUpdated}></BookCard>\n                        </CCol>\n                    })}\n\n                </CRow>\n\n                <CPagination\n                    activePage={currentPage}\n                    pages={pageCount}\n                    onActivePageChange={setCurrentPage} />\n                <span>{totalResults + ' results'}</span>\n            </CCol>\n        </CRow>\n    )\n}\n\nexport default BookSearch\n","export const getShelfDropDown = (state) => {\n    return state.shelf.all.concat([{\n            id: false,\n            name: ' -- select an option -- '\n        }\n    ])\n}","import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport BookSearch from './../views/books/BookSearch';\nimport { shelfGetAll } from './../state/shelf.actions'\nimport { bookGetSome } from './../state/book.actions'\nimport { getShelfDropDown } from './../state/shelf.selector'\n\nconst BookSearchContainer = () => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchTerm, setSearchTerm] = useState(''); // search term that goes to back end\n    const [inputText, setInputText] = useState(''); // text in the search input\n    const [selectedShelf, setSelectedShelf] = useState(false);\n    const [rowsPerPage, setRowsPerPage] = useState(20);\n    const [bookListUpdated, setBookListUpdated] = useState(null) // used to trigger another book search api call when user does checkout, checkin or reserve\n\n    const dispatch = useDispatch()\n    useEffect(() => {\n        dispatch(shelfGetAll())\n    }, [dispatch])\n    useEffect(() => {\n        dispatch(bookGetSome(currentPage, rowsPerPage, searchTerm, selectedShelf))\n    }, [dispatch, currentPage, rowsPerPage, searchTerm, selectedShelf])\n    const shelves = useSelector(getShelfDropDown)\n    const books = useSelector(state => state.books.searchResults.results)\n    const totalResults = useSelector(state => state.books.searchResults.count)\n\n\n    function searchButtonClicked() {\n        setSelectedShelf(false)\n        setSearchTerm(inputText);\n    }\n\n    function onShelfSelected(e) {\n        setInputText('');\n        setSelectedShelf(parseInt(e.target.value))\n    }\n\n    function onSearchTextChange(e) {\n        setInputText(e.target.value);\n    }\n\n    function onBookUpdated(){\n        console.log('bookupdated');\n        setBookListUpdated(Math.random());\n    }\n\n    const bookSearchProps = {\n        searchButtonClicked,\n        onSearchTextChange,\n        inputText,\n        onShelfSelected,\n        selectedShelf,\n        shelves,\n        books,\n        onBookUpdated,\n        currentPage,\n        pageCount: Math.ceil(totalResults / rowsPerPage),\n        setCurrentPage,\n        totalResults\n    }\n\n    return (\n        <BookSearch {...bookSearchProps}></BookSearch>\n    )\n}\n\nexport default BookSearchContainer","import React from 'react'\nimport {\n    CCard,\n    CCardFooter,\n    CCardHeader,\n    CCardBody,\n    CLink\n} from '@coreui/react'\n\n\nconst BasketItem = ({book, onRemove}) => {\n\n    const removeFromBasketClicked = () => {\n        onRemove(book)\n    }\n\n    return (\n        <CCard accentColor=\"success\">\n            <CCardHeader>\n                <h5>{book.title}</h5>\n            </CCardHeader>\n            <CCardBody>\n                {book.authorNames}\n            </CCardBody>\n            <CCardFooter>                \n                <CLink onClick={removeFromBasketClicked}>Remove</CLink>\n            </CCardFooter>\n        </CCard>\n    )\n}\n\nexport default BasketItem\n","import React from 'react'\nimport {\n    CModal,\n    CModalHeader,\n    CModalBody,\n    CModalFooter,\n    CListGroup,\n    CListGroupItem,\n    CButton\n} from '@coreui/react'\n\nconst CheckoutModal = ({ show, onClose, books, onConfirm }) => {\n\n\n    return (\n        <CModal show={show} onClose={onClose}>\n            <CModalHeader closeButton>Checkout</CModalHeader>\n            <CModalBody>\n\n                {books.map((book,i) => (\n                    <CListGroup key={i}>\n                        <CListGroupItem>\n                            <h5>{book.title}</h5>\n                            <div>\n                                {Date.now()}\n                            </div>\n                        </CListGroupItem>\n                    </CListGroup>\n                ))}\n\n            </CModalBody>\n            <CModalFooter>\n                <CButton onClick={onConfirm} color=\"primary\">Confirm Checkout</CButton>\n                <CButton color=\"secondary\" onClick={onClose}>Cancel</CButton>\n            </CModalFooter>\n        </CModal>\n    )\n}\n\nexport default CheckoutModal\n","import React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n    CCol,\n    CRow,\n    CButton,\n    CFormGroup,\n    CLabel,\n    CSelect, CListGroup, CListGroupItem, CLink\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport BasketItem from './BasketItem'\nimport { bookRemoveFromBasket, bookCheckout, bookSetShowModal } from './../../state/book.actions'\nimport CheckoutModal from './CheckoutModal'\n\n\nconst Basket = () => {\n    const showModal = useSelector(state => state.books.showBasketModal)\n    const dispatch = useDispatch()\n    const basketItems = useSelector(state => state.books.basket)\n\n    const removeFromBasketClicked = (book) => {\n        console.log(book)\n        dispatch(bookRemoveFromBasket(book))\n    }\n\n    const onClose = () => {\n        dispatch(bookSetShowModal(false))\n    }\n\n    const onCheckoutClicked = () => {\n        dispatch(bookSetShowModal(true))\n    }\n\n    const onConfirmCheckout = () => {\n        const bookInstances = []\n        basketItems.forEach(book => {\n            if (book.copies.length > 0) {\n                const available = book.copies.filter(copy => copy.status = 'a')\n                if (available.length > 0) {\n                    bookInstances.push(available[0])\n                }\n            }\n        })\n        dispatch(bookCheckout(bookInstances))\n    }\n\n    const checkoutModalProps = {\n        show: showModal,\n        onClose,\n        books: basketItems,\n        onConfirm: onConfirmCheckout\n    }\n\n    return (\n        <CRow>\n            <CCol>\n                <div className='d-flex justify-content-between mb-2'>\n                    <div className='mb-4'>Basket</div>\n                    <CButton onClick={onCheckoutClicked} type=\"button\" color=\"primary\" disabled={basketItems.length === 0}>Checkout</CButton>\n                </div>\n                <CRow>\n                    \n                    {basketItems.map((book,i) => {\n                        return <CCol xs=\"12\" sm=\"6\" md=\"4\" key={i} >\n                            <BasketItem book={book} onRemove={removeFromBasketClicked}></BasketItem>\n                        </CCol>\n                    })}\n\n                </CRow>\n                {basketItems.length === 0 && <CRow>\n                    Basket is empty\n                </CRow>}\n\n                <CheckoutModal {...checkoutModalProps}></CheckoutModal>\n            </CCol>\n        </CRow>\n    )\n}\n\nexport default Basket\n","import React from 'react';\nimport {\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCardFooter,\n    CLink,\n} from '@coreui/react'\n\nconst BorrowedBookCard = ({ book, onBookReturned }) => {\n    const authorNames = book.book.author\n                            .map(author => author.first_name + ' ' + author.last_name)\n                            .join(', ')\n    return (\n        <CCard accentColor=\"primary\">\n            <CCardHeader>\n                <h5>{book.book.title}</h5>\n            </CCardHeader>\n            <CCardBody>\n                {authorNames}\n            </CCardBody>\n            <CCardFooter>                \n                <CLink onClick={() => onBookReturned(book)}>Return</CLink>\n            </CCardFooter>\n        </CCard>\n    )\n}\n\nexport default BorrowedBookCard","import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { bookGetBorrowed, bookReturn } from './../../state/book.actions'\nimport BorrowedBookCard from './BorrowedBookCard'\nimport {\n    CCol,\n    CRow,\n} from '@coreui/react'\n\nconst MyBorrowed =  () => {\n    const dispatch = useDispatch()\n    useEffect(() => {\n        dispatch(bookGetBorrowed())\n    }, [dispatch])\n    const myBorrowedBooks =  useSelector(state => state.books.borrowed)\n\n    console.log(myBorrowedBooks)\n\n    const onBookReturned = (returnedBook) => {\n        dispatch(bookReturn(returnedBook))\n    }\n\n    return (\n        <>\n            <div>My Borrowed</div>\n            <CRow>\n                {myBorrowedBooks.map((book) => {\n                    return <CCol xs=\"12\" sm=\"6\" md=\"4\" key={book.id} >\n                        <BorrowedBookCard book={book} onBookReturned={onBookReturned}></BorrowedBookCard>\n                    </CCol>\n                })}\n            </CRow>\n        </>\n    );\n}\n\nexport default MyBorrowed;","import React from 'react';\nimport { useSelector } from 'react-redux'\nconst styles = {\n    zIndex: 9,\n    top: '50%',\n    right: '50%',\n    marginTop: -16,\n    marginRight: -16\n}\n\nconst Spinner = () => {\n    const spinner = useSelector(state => state.spinner)\n    console.log(spinner)\n\n    return <>\n        {spinner > 0 &&\n            <div className=\"spinner-border text-primary position-fixed d-block\" style={styles} role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </div>\n        }\n    </>\n}\n\nexport default Spinner;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => {\n    console.log(Component)\n    const loggedIn = useSelector(state => state.login.loggedIn)\n    return (\n        <Route {...rest} render={props => (\n            loggedIn\n                ? <Component {...props} />\n                : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n        )} />\n    )\n}\n\nexport default PrivateRoute","import React, { Suspense } from 'react'\nimport {\n  Redirect,\n  Route,\n  Switch\n} from 'react-router-dom'\nimport { CContainer, CFade } from '@coreui/react'\nimport BookSearchContainer from './BookSearch.container'\nimport BookEditCreate from './../views/books/BookEditCreate'\nimport Basket from './../views/basket/Basket'\nimport MyBorrowed from './../views/books/MyBorrowed'\nimport Spinner from './Spinner';\nimport PrivateRoute from './../views/books/PrivateRoute';\n  \nconst loading = (\n  <div className=\"pt-3 text-center\">\n    <div className=\"sk-spinner sk-spinner-pulse\"></div>\n  </div>\n)\n\nconst TheContent = () => {\n  return (\n    <main className=\"c-main\">\n      <CContainer fluid>\n        <Spinner></Spinner>\n        <Suspense fallback={loading}>\n          <Switch>\n            <PrivateRoute exact path=\"/bookSearch\" name=\"Book Search\" component={BookSearchContainer} />\n            <PrivateRoute exact path=\"/book\" name=\"Book Create\" component={BookEditCreate} />\n            <PrivateRoute exact path=\"/bookEdit/:id\" name=\"Book Detail\" component={BookEditCreate} />\n            <PrivateRoute exact path=\"/basket\" name=\"Basket\" component={Basket} />\n            <PrivateRoute exact path=\"/myBorrowed\" name=\"My Borrowed\" component={MyBorrowed} />\n            <Redirect from=\"/\" to=\"/bookSearch\" />\n          </Switch>\n        </Suspense>\n      </CContainer>\n    </main>\n  )\n}\n\nexport default React.memo(TheContent)\n","import React from 'react'\nimport { CFooter } from '@coreui/react'\n\nconst TheFooter = () => {\n  return (\n    <CFooter fixed={false}>\n      <div>\n        <a href=\"https://coreui.io\" target=\"_blank\" rel=\"noopener noreferrer\">CoreUI</a>\n        <span className=\"ml-1\">&copy; 2020 creativeLabs.</span>\n      </div>\n      <div className=\"mfs-auto\">\n        <span className=\"mr-1\">Powered by</span>\n        <a href=\"https://coreui.io/react\" target=\"_blank\" rel=\"noopener noreferrer\">CoreUI for React</a>\n      </div>\n    </CFooter>\n  )\n}\n\nexport default React.memo(TheFooter)\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  CHeader,\n  CToggler,\n  CHeaderBrand,\n  CHeaderNav,\n  CBadge,\n  CLink\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\n\n\nconst TheHeader = () => {\n    const dispatch = useDispatch()\n    const sidebarShow = useSelector(state => state.sidebarShow)\n    const user = useSelector(state => state.user.me)\n    const basketCount = useSelector(state => state.books.basket.length)\n\n    const toggleSidebar = () => {\n        const val = [true, 'responsive'].includes(sidebarShow) ? false : 'responsive'\n        dispatch({type: 'set', sidebarShow: val})\n    }\n\n    const toggleSidebarMobile = () => {\n        const val = [false, 'responsive'].includes(sidebarShow) ? true : 'responsive'\n        dispatch({type: 'set', sidebarShow: val})\n    }\n\n    return (\n        <CHeader withSubheader>\n            <CToggler\n                inHeader\n                className=\"ml-md-3 d-lg-none\"\n                onClick={toggleSidebarMobile}\n            />\n            <CToggler\n                inHeader\n                className=\"ml-3 d-md-down-none\"\n                onClick={toggleSidebar}\n            />\n            <CHeaderBrand className=\"mx-auto d-lg-none\" to=\"/\">\n                <CIcon name=\"logo\" height=\"48\" alt=\"Logo\"/>\n            </CHeaderBrand>\n\n            {/* CSS in this section pushes email and basket icon bellow to the right */}\n            <CHeaderNav className=\"d-md-down-none mr-auto\">\n            </CHeaderNav>\n\n            {user && user.email && \n                <CHeaderNav className=\"mr-5\">{user.email}</CHeaderNav>}\n\n            <CHeaderNav className=\"mr-5\">\n                <CLink to='/basket'>\n                    <CIcon name=\"cil-basket\"/>\n                    <CBadge shape=\"pill\" color=\"danger\">{basketCount}</CBadge>\n                </CLink>\n            </CHeaderNav>\n            \n        </CHeader>\n    )\n}\n\nexport default TheHeader\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  CCreateElement,\n  CSidebar,\n  CSidebarBrand,\n  CSidebarNav,\n  CSidebarNavDivider,\n  CSidebarNavTitle,\n  CSidebarMinimizer,\n  CSidebarNavDropdown,\n  CSidebarNavItem,\n  CImg\n} from '@coreui/react'\n\nimport logo from './../assets/karmela.png'\n// import { logout } from './../services/login.service';\nimport { useHistory } from \"react-router-dom\";\nimport { logout } from './../state/login.actions'\n\n// sidebar nav config\nimport navigation from './_nav'\n\nconst TheSidebar = () => {\n    const dispatch = useDispatch()\n    const show = useSelector(state => state.sidebarShow)\n    let history = useHistory();\n\n    function logoutClicked(){\n        dispatch(logout())\n    }\n\n    return (\n        <CSidebar\n        show={show}\n        onShowChange={(val) => dispatch({type: 'set', sidebarShow: val })}\n        >\n        <CSidebarBrand className=\"d-md-down-none white\" to=\"/\">\n            {/* <CIcon\n            className=\"c-sidebar-brand-full\"\n            name=\"logo-negative\"\n            height={35}\n            />\n            <CIcon\n            className=\"c-sidebar-brand-minimized\"\n            name=\"sygnet\"\n            height={35}\n            /> */}\n            <CImg\n                src={logo}\n                className=\"c-sidebar-brand-full logo\"\n                alt=\"admin@bootstrapmaster.com\"/>\n        </CSidebarBrand>\n        <CSidebarNav>\n            <CSidebarNavItem name='Search' to='/bookSearch' icon='cil-search'></CSidebarNavItem>\n            {/* <CSidebarNavItem name='Book' to='/book' icon='cil-book'></CSidebarNavItem> */}\n            <CSidebarNavItem name='Basket' to='/basket' icon='cil-basket'></CSidebarNavItem>\n            <CSidebarNavItem name='My Borrowed' to='/myBorrowed' icon='cil-book'></CSidebarNavItem>\n            <CSidebarNavItem name='Logout' onClick={logoutClicked} icon='cil-account-logout'></CSidebarNavItem>\n            {/* <CCreateElement\n            items={navigation}\n            components={{\n                CSidebarNavDivider,\n                CSidebarNavDropdown,\n                CSidebarNavItem,\n                CSidebarNavTitle\n            }}\n            /> */}\n        </CSidebarNav>\n        <CSidebarMinimizer className=\"c-d-md-down-none\"/>\n        </CSidebar>\n    )\n}\n\nexport default React.memo(TheSidebar)\n","import React from 'react'\nimport {\n  TheContent,\n  TheSidebar,\n  TheFooter,\n  TheHeader\n} from './index'\n\nconst TheLayout = () => {\n\n  return (\n    <div className=\"c-app c-default-layout\">\n      <TheSidebar/>\n      <div className=\"c-wrapper\">\n        <TheHeader/>\n        <div className=\"c-body\">\n          <TheContent/>\n        </div>\n        <TheFooter/>\n      </div>\n    </div>\n  )\n}\n\nexport default TheLayout\n"],"sourceRoot":""}