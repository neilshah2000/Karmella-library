(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[7],{620:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return s}));var a=n(624),l=n.n(a);function r(e){var t="/catalog/api/books/";return t=function(e,t){var n=window.location.origin+e;console.log(n);var a=new URL(n);return Object.keys(t).forEach((function(e){a.searchParams.append(e,t[e])})),a}(t,e),fetch(t).then((function(e){return e.json()}))}function c(e){return fetch("/catalog/api/books/"+e).then((function(e){return e.json()}))}function o(e){var t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-CSRFTOKEN":l.a.get("csrftoken")}};return fetch("/catalog/api/books/",t).then((function(e){return e.json()}))}function u(e){var t="/catalog/api/books/"+e.id+"/",n={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-CSRFTOKEN":l.a.get("csrftoken")}};return fetch(t,n).then((function(e){return e.json()}))}function i(){return fetch("/catalog/api/authors/").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return e.value=e.id,e.key=e.id,e.label=e.first_name+" "+e.last_name,e}))}))}function s(){return fetch("/catalog/api/shelves/").then((function(e){return e.json()}))}},649:function(e,t,n){"use strict";n.r(t);var a=n(618),l=n.n(a),r=n(619),c=n(617),o=n(1),u=n.n(o),i=n(19),s=n(638),m=n(639),h=function(e){var t=e.options,n=e.children,a=e.maxHeight,l=(0,e.getValue)(),r=Object(c.a)(l,1)[0],o=35*t.indexOf(r);return u.a.createElement(m.a,{height:a,itemCount:n.length,itemSize:35,initialScrollOffset:o},(function(e){var t=e.index,a=e.style;return u.a.createElement("div",{style:a},n[t])}))},E=n(616),f=n(615),d=n(620);t.default=function(e){var t=Object(i.h)(),n=Object(o.useState)({title:"",titleShort:"",isbn:"",callNumber:"",language:"",pages:"",publisher:"",publisherPlace:"",issued:"",collectionTitle:"",place:"",abstract:""}),a=Object(c.a)(n,2),m=a[0],p=a[1],b=Object(o.useState)([]),g=Object(c.a)(b,2),v=g[0],j=g[1],O=Object(o.useState)([]),C=Object(c.a)(O,2),S=C[0],k=C[1];function y(e){var t=e.target.id,n=e.target.value,a=JSON.parse(JSON.stringify(m));a[t]=n,p(a)}return Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var n,a,r,o,u,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=13;break}return e.next=3,Promise.all([Object(d.b)(),Object(d.c)(t.id)]);case 3:n=e.sent,a=Object(c.a)(n,2),r=a[0],o=a[1],p(o),j(r),u=r.filter((function(e){return o.author.includes(e.id)})),k(u),e.next=17;break;case 13:return e.next=15,Object(d.b)();case 15:i=e.sent,j(i);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),u.a.createElement(u.a.Fragment,null,u.a.createElement(E.I,null,u.a.createElement(E.j,null,u.a.createElement(E.e,null,u.a.createElement(E.i,null,"Create Book"),u.a.createElement(E.f,null,u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"title"},"Authors"),u.a.createElement(s.a,{components:{MenuList:h},onChange:function(e){k(e)},value:S,options:v,isMulti:!0})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"title"},"Title"),u.a.createElement(E.z,{id:"title",placeholder:"Book title",onChange:y,value:m.title||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"titleShort"},"Short Title"),u.a.createElement(E.z,{id:"titleShort",placeholder:"Short title",onChange:y,value:m.titleShort||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"isbn"},"ISBN"),u.a.createElement(E.z,{id:"isbn",placeholder:"978-1-86197-876-9",onChange:y,value:m.isbn||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"callNumber"},"Call Number"),u.a.createElement(E.z,{id:"callNumber",placeholder:"",onChange:y,value:m.callNumber||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"language"},"Language"),u.a.createElement(E.z,{id:"language",placeholder:"es",onChange:y,value:m.language||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"pages"},"Pages"),u.a.createElement(E.z,{id:"pages",placeholder:"",onChange:y,value:m.pages||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"publisher"},"Publisher"),u.a.createElement(E.z,{id:"publisher",placeholder:"",onChange:y,value:m.publisher||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"publisherPlace"},"Publisher Place"),u.a.createElement(E.z,{id:"publisherPlace",placeholder:"",onChange:y,value:m.publisherPlace||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"issued"},"Issued"),u.a.createElement(E.z,{id:"issued",placeholder:"",onChange:y,value:m.issued||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"collectionTitle"},"Collection Title"),u.a.createElement(E.z,{id:"collectionTitle",placeholder:"",onChange:y,value:m.collectionTitle||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"place"},"Place"),u.a.createElement(E.z,{id:"place",placeholder:"",onChange:y,value:m.place||""})),u.a.createElement(E.u,null,u.a.createElement(E.E,{htmlFor:"abstract"},"Abstract"),u.a.createElement(E.S,{name:"abstract",id:"abstract",rows:"10",placeholder:"Content...",onChange:y,value:m.abstract||""}))),u.a.createElement(E.g,null,u.a.createElement("span",{className:"mr-2"},u.a.createElement(E.d,{type:"submit",size:"sm",color:"primary",onClick:function(){m.author=S.map((function(e){return e.key})),t.id?Object(d.f)(m).then((function(e){console.log(e)})):Object(d.a)(m).then((function(e){console.log(e)}))}},u.a.createElement(f.a,{name:"cil-scrubber"})," Submit")),u.a.createElement(E.d,{type:"reset",size:"sm",color:"danger",onClick:function(){console.log("test")}},u.a.createElement(f.a,{name:"cil-ban"})," Reset"))))))}}}]);
//# sourceMappingURL=7.f3b55b40.chunk.js.map