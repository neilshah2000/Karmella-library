{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","services/book.service.js","../node_modules/js-cookie/src/js.cookie.js","views/books/BookSearch.js","services/useBookFetch.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","TypeError","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","getBooks","params","endpoint","url","window","location","origin","console","log","builtUrl","URL","keys","forEach","searchParams","append","buildParams","fetch","response","json","getBook","bookId","createBook","book","request","method","body","JSON","stringify","headers","Cookies","get","updateBook","id","getAuthors","result","map","author","label","first_name","last_name","getShelves","factory","define","OldCookies","api","noConflict","extend","attributes","decode","s","replace","decodeURIComponent","init","converter","set","document","path","defaults","expires","Date","toUTCString","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","jar","cookies","parts","join","charAt","read","parse","getJSON","remove","withConverter","BookSearch","useState","currentPage","setCurrentPage","searchTerm","setSearchTerm","inputText","setInputText","shelves","setShelves","selectedShelf","setSelectedShelf","rowsPerPage","shelf","data","setData","totalResults","setTotalResults","pageCount","setPageCount","makePretty","authorNames","author_names","useEffect","a","limit","offset","search","results","count","Math","ceil","useBookFetch","books","sm","className","onClick","type","color","placeholder","onChange","target","row","md","htmlFor","class","xs","custom","parseInt","disabled","selected","accentColor","title","copies","activePage","pages","onActivePageChange"],"mappings":"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","file":"static/js/5.9630377f.chunk.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import Cookies from 'js-cookie';\n\nfunction getBooks(params) {\n    let endpoint = '/catalog/api/books/';\n    endpoint = buildParams(endpoint, params);\n    return fetch(endpoint)\n        .then(response => {return response.json()})\n}\n\nfunction getBook(bookId) {\n    let endpoint = '/catalog/api/books/' + bookId;\n    return fetch(endpoint)\n        .then(response => {return response.json()})\n}\n\nfunction createBook(book) {\n    let endpoint = '/catalog/api/books/';\n    let request = {\n        method: 'POST',\n        body: JSON.stringify(book),\n        headers: {\n            'Content-Type': 'application/json',\n            'X-CSRFTOKEN': Cookies.get('csrftoken')\n        }\n    }\n    return fetch(endpoint, request)\n        .then(response => {return response.json()})\n}\n\nfunction updateBook(book) {\n    let endpoint = '/catalog/api/books/' + book.id + '/';\n    let request = {\n        method: 'PUT',\n        body: JSON.stringify(book),\n        headers: {\n            'Content-Type': 'application/json',\n            'X-CSRFTOKEN': Cookies.get('csrftoken')\n        }\n    }\n    return fetch(endpoint, request)\n        .then(response => {return response.json()})\n}\n\nfunction getAuthors() {\n    let endpoint = '/catalog/api/authors/';\n    return fetch(endpoint)\n        .then(response => {return response.json()})\n        .then((result) => result.map((author) => { // add the fields needed for the select component\n            author.value = author.id;\n            author.key = author.id;\n            author.label = author.first_name + ' ' + author.last_name;\n            return author;\n        }));\n}\n\nfunction getShelves() {\n    let endpoint = '/catalog/api/shelves/';\n    return fetch(endpoint)\n        .then(response => {return response.json()})\n}\n\n\nfunction buildParams(endpoint, params) {\n    const url = window.location.origin + endpoint;\n    console.log(url);\n    let builtUrl = new URL(url);\n    Object.keys(params).forEach((key) => {\n        builtUrl.searchParams.append(key, params[key])\n    });\n    return builtUrl;\n}\n\nexport {\n    getBooks,\n    createBook,\n    getAuthors,\n    getBook,\n    updateBook,\n    getShelves\n}","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom';\nimport {\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCol,\n    CRow,\n    CDataTable,\n    CPagination,\n    CInput,\n    CInputGroup,\n    CInputGroupPrepend,\n    CButton,\n    CFormGroup,\n    CLabel,\n    CSelect,\n    CForm,\n    CCardFooter,\n    CSwitch,\n    CBadge\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { useBookFetch } from './../../services/useBookFetch';\nimport { getShelves } from './../../services/book.service'\n\nconst fields = ['title','zoteroId', 'authorNames']\n\n\nconst BookSearch = () => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchTerm, setSearchTerm] = useState(''); // search term that goes to back end\n    const [inputText, setInputText] = useState(''); // text in the search input\n    const [shelves, setShelves] = useState([]);\n    const [selectedShelf, setSelectedShelf] = useState(null);\n    const [rowsPerPage, setRowsPerPage] = useState(20);\n\n    // API call to get books. Re-triggered when any of the arguments changes\n    const [books, totalResults, pageCount] = useBookFetch(currentPage, rowsPerPage, searchTerm, selectedShelf)\n\n    useEffect(() => {\n        (async function fetchShelves(){\n            getShelves().then((data) => {\n                setShelves(data);\n            });\n        })();\n    }, []);\n\n\n    function searchButtonClicked() {\n        setSelectedShelf(false)\n        setSearchTerm(inputText);\n    }\n\n    function onShelfSelected(e) {\n        setInputText('');\n        setSelectedShelf(parseInt(e.target.value))\n    }\n\n    function onSearchTextChange(e) {\n        setInputText(e.target.value);\n    }\n\n    return (\n        \n        <>\n        <CRow>\n            <CCol>\n            <CCard>\n                <CCardHeader>\n                    Book Search\n                </CCardHeader>\n                <CCardBody>\n                    <CRow>\n                        <CCol sm='4'>\n                            <CInputGroup className={'mb-4'}>\n                                <CInputGroupPrepend>\n                                    <CButton onClick={searchButtonClicked} type=\"button\" color=\"primary\"><CIcon name=\"cil-magnifying-glass\" /> Search</CButton>\n                                </CInputGroupPrepend>\n                                <CInput placeholder=\"Title or abstract\" onChange={onSearchTextChange} value={inputText}/>\n                            </CInputGroup>\n                        </CCol>\n                        <CCol sm='4'></CCol>\n                        <CCol sm='4'>\n                            <CFormGroup row>\n                                <CCol md=\"3\">\n                                    <CLabel htmlFor=\"shelfSelect\" class='pt-1'>Shelf</CLabel>\n                                </CCol>\n                                <CCol xs=\"12\" md=\"9\">\n                                    <CSelect custom name=\"shelfSelect\" id=\"shelfSelect\" onChange={onShelfSelected} value={selectedShelf}>\n                                        <option disabled selected value='false'> -- select an option -- </option>\n                                        {shelves.map((shelf) => {\n                                            return <option value={shelf.id}>{shelf.name}</option>\n                                        })}\n                                    </CSelect>\n                                </CCol>\n                            </CFormGroup>\n                        </CCol>\n                    </CRow>\n\n                    <CRow>\n                        \n                        {books.map((book) => {\n                            return <CCol xs=\"12\" sm=\"6\" md=\"4\">\n                                <CCard accentColor=\"primary\">\n                                    <CCardHeader>\n                                        <h5>{book.title}</h5>\n                                    </CCardHeader>\n                                    <CCardBody>\n                                        {book.author_names}\n                                    </CCardBody>\n                                    <CCardFooter>\n                                        Copies: {book.copies.length}\n                                    </CCardFooter>\n                                </CCard>\n                            </CCol>\n                        })}\n\n                    </CRow>\n\n\n                    {/* <CDataTable\n                        items={books}\n                        fields={fields}\n                        scopedSlots = {{title: (book) => (\n                            <td><Link to={`/bookEdit/${book.id}`}>{book.title}</Link></td>\n                        )}}\n                        hover\n                        striped\n                        bordered\n                        size=\"sm\"\n                        itemsPerPage={rowsPerPage} /> */}\n                    <CPagination\n                        activePage={currentPage}\n                        pages={pageCount}\n                        onActivePageChange={setCurrentPage} />\n                    <span>{totalResults + ' results'}</span>\n                </CCardBody>\n            </CCard>\n            </CCol>\n        </CRow>\n        </>\n    )\n}\n\nexport default BookSearch\n","import { getBooks } from './book.service';\nimport { useState, useEffect } from 'react';\n\nconst useBookFetch = (currentPage, rowsPerPage, searchTerm, shelf) => {\n    const [data, setData] = useState([]);\n    const [totalResults, setTotalResults] = useState(0);\n    const [pageCount, setPageCount] = useState(1);\n\n    function makePretty(book) {\n        const authorNames = book.author_names.join(', ');\n        book.authorNames = authorNames;\n        return book;\n    }\n\n    useEffect(() => {\n        (async function fetchData() {\n            const params = {\n                limit: rowsPerPage,\n                offset: (rowsPerPage * currentPage) - rowsPerPage\n            }\n            // Add either the shelf or search parameter not both\n            // shelf has to be null for string search to work\n            if (!shelf) {\n                params.search = searchTerm;\n            } else {\n                params.shelf = shelf\n            }\n            const result = await getBooks(params)\n            setData(result.results.map(makePretty));\n            setTotalResults(result.count);\n            setPageCount(Math.ceil(result.count / rowsPerPage))\n        })();\n    }, [currentPage, rowsPerPage, searchTerm, shelf]); // Dependency array. API call will be re-triggered on any change\n\n    return [ data, totalResults, pageCount ];\n};\n\nexport {\n    useBookFetch\n}"],"sourceRoot":""}