(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[3],{641:function(e,t){},642:function(e,t,a){e.exports=a.p+"static/media/karmela.41a4104d.png"},649:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(26),r=a(23),o=a(122),m=a(61),s=a(48),u=a(12),i=function(e){var t=Object(m.b)();function a(){return e.book.copies.filter((function(e){return"a"===e.status})).length}function n(){return 0===a()}return c.a.createElement(r.e,{accentColor:"primary"},c.a.createElement(r.i,null,c.a.createElement("h5",null,e.book.title)),c.a.createElement(r.f,null,e.book.author_names),c.a.createElement(r.g,null,c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("div",null,"Copies: ",e.book.copies.length),c.a.createElement("div",null,"Available: ",a())),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(r.C,{disabled:n(),className:n()?"disabled-link":null,onClick:function(){t(Object(u.s)(e.book))}},"Add to Basket"))))))},E=function(e){var t=e.searchButtonClicked,a=e.onSearchTextChange,n=e.inputText,l=e.onShelfSelected,o=e.selectedShelf,m=e.shelves,u=e.books,E=e.onBookUpdated,b=e.currentPage,d=e.pageCount,f=e.setCurrentPage,p=e.totalResults;return c.a.createElement(r.L,null,c.a.createElement(r.j,null,c.a.createElement("h2",{className:"mb-4"},"Book Search"),c.a.createElement(r.L,null,c.a.createElement(r.j,{sm:"4"},c.a.createElement(r.x,{className:"mb-4"},c.a.createElement(r.z,null,c.a.createElement(r.d,{onClick:t,type:"button",color:"primary"},c.a.createElement(s.a,{name:"cil-magnifying-glass"})," Search")),c.a.createElement(r.w,{placeholder:"Title or abstract",onChange:a,value:n}))),c.a.createElement(r.j,{sm:"4"}),c.a.createElement(r.j,{sm:"4"},c.a.createElement(r.r,{row:!0},c.a.createElement(r.j,{md:"3"},c.a.createElement(r.B,{htmlFor:"shelfSelect",className:"pt-1"},"Shelf")),c.a.createElement(r.j,{xs:"12",md:"9"},c.a.createElement(r.M,{custom:!0,name:"shelfSelect",id:"shelfSelect",onChange:l,value:o},m.map((function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.name)}))))))),c.a.createElement(r.L,null,u.map((function(e){return c.a.createElement(r.j,{xs:"12",sm:"6",md:"4",key:e.id},c.a.createElement(i,{book:e,updated:E}))}))),c.a.createElement(r.J,{activePage:b,pages:d,onActivePageChange:f}),c.a.createElement("span",null,p+" results")))},b=a(59),d=function(e){return e.shelf.all.concat([{id:!1,name:" -- select an option -- "}])},f=function(){var e=Object(n.useState)(1),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],f=s[1],p=Object(n.useState)(""),h=Object(o.a)(p,2),k=h[0],g=h[1],v=Object(n.useState)(!1),j=Object(o.a)(v,2),O=j[0],C=j[1],w=Object(n.useState)(20),S=Object(o.a)(w,2),y=S[0],N=(S[1],Object(n.useState)(null)),x=Object(o.a)(N,2),B=(x[0],x[1]),R=Object(m.b)();Object(n.useEffect)((function(){R(Object(b.e)())}),[R]),Object(n.useEffect)((function(){R(Object(u.w)(a,y,i,O))}),[R,a,y,i,O]);var L=Object(m.c)(d),P=Object(m.c)((function(e){return e.books.searchResults.results})),M=Object(m.c)((function(e){return e.books.searchResults.count}));var I={searchButtonClicked:function(){C(!1),f(k)},onSearchTextChange:function(e){g(e.target.value)},inputText:k,onShelfSelected:function(e){g(""),C(parseInt(e.target.value))},selectedShelf:O,shelves:L,books:P,onBookUpdated:function(){console.log("bookupdated"),B(Math.random())},currentPage:a,pageCount:Math.ceil(M/y),setCurrentPage:l,totalResults:M};return c.a.createElement(E,I)},p=a(641),h=a.n(p),k=function(e){var t=e.book,a=e.onRemove;return c.a.createElement(r.e,{accentColor:"success"},c.a.createElement(r.i,null,c.a.createElement("h5",null,t.title)),c.a.createElement(r.f,null,t.authorNames),c.a.createElement(r.g,null,c.a.createElement(r.C,{onClick:function(){a(t)}},"Remove")))},g=function(e){var t=e.show,a=e.onClose,n=e.books,l=e.onConfirm;return c.a.createElement(r.F,{show:t,onClose:a},c.a.createElement(r.I,{closeButton:!0},"Checkout"),c.a.createElement(r.G,null,n.map((function(e,t){return c.a.createElement(r.D,{key:t},c.a.createElement(r.E,null,c.a.createElement("h5",null,e.title),c.a.createElement("div",null,Date.now())))}))),c.a.createElement(r.H,null,c.a.createElement(r.d,{onClick:l,color:"primary"},"Confirm Checkout"),c.a.createElement(r.d,{color:"secondary",onClick:a},"Cancel")))},v=function(){var e=Object(m.c)((function(e){return e.books.showBasketModal})),t=Object(m.b)(),a=Object(m.c)((function(e){return e.books.basket})),n=function(e){console.log(e),t(Object(u.x)(e))},l={show:e,onClose:function(){t(Object(u.z)(!1))},books:a,onConfirm:function(){var e=[];a.forEach((function(t){if(t.copies.length>0){var a=t.copies.filter((function(e){return e.status="a"}));a.length>0&&e.push(a[0])}})),t(Object(u.t)(e))}};return c.a.createElement(r.L,null,c.a.createElement(r.j,null,c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"mb-4"},"Basket"),c.a.createElement(r.d,{onClick:function(){t(Object(u.z)(!0))},type:"button",color:"primary",disabled:0===a.length},"Checkout")),c.a.createElement(r.L,null,a.map((function(e,t){return c.a.createElement(r.j,{xs:"12",sm:"6",md:"4",key:t},c.a.createElement(k,{book:e,onRemove:n}))}))),0===a.length&&c.a.createElement(r.L,null,"Basket is empty"),c.a.createElement(g,l)))},j=function(e){var t=e.book,a=e.onBookReturned,n=t.book.author.map((function(e){return e.first_name+" "+e.last_name})).join(", ");return c.a.createElement(r.e,{accentColor:"primary"},c.a.createElement(r.i,null,c.a.createElement("h5",null,t.book.title)),c.a.createElement(r.f,null,n),c.a.createElement(r.g,null,c.a.createElement(r.C,{onClick:function(){return a(t)}},"Return")))},O=function(){var e=Object(m.b)();Object(n.useEffect)((function(){e(Object(u.v)())}),[e]);var t=Object(m.c)((function(e){return e.books.borrowed}));console.log(t);var a=function(t){e(Object(u.y)(t))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"My Borrowed"),c.a.createElement(r.L,null,t.map((function(e){return c.a.createElement(r.j,{xs:"12",sm:"6",md:"4",key:e.id},c.a.createElement(j,{book:e,onBookReturned:a}))}))))},C={zIndex:9,top:"50%",right:"50%",marginTop:-16,marginRight:-16},w=function(){var e=Object(m.c)((function(e){return e.spinner}));return console.log(e),c.a.createElement(c.a.Fragment,null,e>0&&c.a.createElement("div",{className:"spinner-border text-primary position-fixed d-block",style:C,role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},S=a(388),y=function(e){var t=e.component,a=Object(S.a)(e,["component"]);console.log(t);var n=Object(m.c)((function(e){return e.login.loggedIn}));return c.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?c.a.createElement(t,e):c.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},N=c.a.createElement("div",{className:"pt-3 text-center"},c.a.createElement("div",{className:"sk-spinner sk-spinner-pulse"})),x=c.a.memo((function(){return c.a.createElement("main",{className:"c-main"},c.a.createElement(r.k,{fluid:!0},c.a.createElement(w,null),c.a.createElement(n.Suspense,{fallback:N},c.a.createElement(l.d,null,c.a.createElement(y,{exact:!0,path:"/bookSearch",name:"Book Search",component:f}),c.a.createElement(y,{exact:!0,path:"/book",name:"Book Create",component:h.a}),c.a.createElement(y,{exact:!0,path:"/bookEdit/:id",name:"Book Detail",component:h.a}),c.a.createElement(y,{exact:!0,path:"/basket",name:"Basket",component:v}),c.a.createElement(y,{exact:!0,path:"/myBorrowed",name:"My Borrowed",component:O}),c.a.createElement(l.a,{from:"/",to:"/bookSearch"})))))})),B=c.a.memo((function(){return c.a.createElement(r.p,{fixed:!1},c.a.createElement("div",null,c.a.createElement("a",{href:"https://coreui.io",target:"_blank",rel:"noopener noreferrer"},"CoreUI"),c.a.createElement("span",{className:"ml-1"},"\xa9 2020 creativeLabs.")),c.a.createElement("div",{className:"mfs-auto"},c.a.createElement("span",{className:"mr-1"},"Powered by"),c.a.createElement("a",{href:"https://coreui.io/react",target:"_blank",rel:"noopener noreferrer"},"CoreUI for React")))})),R=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.sidebarShow})),a=Object(m.c)((function(e){return e.user.me})),n=Object(m.c)((function(e){return e.books.basket.length}));return c.a.createElement(r.s,{withSubheader:!0},c.a.createElement(r.W,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(t)||"responsive";e({type:"set",sidebarShow:a})}}),c.a.createElement(r.W,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(t)&&"responsive";e({type:"set",sidebarShow:a})}}),c.a.createElement(r.t,{className:"mx-auto d-lg-none",to:"/"},c.a.createElement(s.a,{name:"logo",height:"48",alt:"Logo"})),c.a.createElement(r.u,{className:"d-md-down-none mr-auto"}),a&&a.email&&c.a.createElement(r.u,{className:"mr-5"},a.email),c.a.createElement(r.u,{className:"mr-5"},c.a.createElement(r.C,{to:"/basket"},c.a.createElement(s.a,{name:"cil-basket"}),c.a.createElement(r.a,{shape:"pill",color:"danger"},n))))},L=a(642),P=a.n(L),M=a(22),I=c.a.memo((function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.sidebarShow}));Object(l.g)();return c.a.createElement(r.N,{show:t,onShowChange:function(t){return e({type:"set",sidebarShow:t})}},c.a.createElement(r.O,{className:"d-md-down-none white",to:"/"},c.a.createElement(r.v,{src:P.a,className:"c-sidebar-brand-full logo",alt:"admin@bootstrapmaster.com"})),c.a.createElement(r.Q,null,c.a.createElement(r.R,{name:"Search",to:"/bookSearch",icon:"cil-search"}),c.a.createElement(r.R,{name:"Basket",to:"/basket",icon:"cil-basket"}),c.a.createElement(r.R,{name:"My Borrowed",to:"/myBorrowed",icon:"cil-book"}),c.a.createElement(r.R,{name:"Logout",onClick:function(){e(Object(M.k)())},icon:"cil-account-logout"})),c.a.createElement(r.P,{className:"c-d-md-down-none"}))}));t.default=function(){return c.a.createElement("div",{className:"c-app c-default-layout"},c.a.createElement(I,null),c.a.createElement("div",{className:"c-wrapper"},c.a.createElement(R,null),c.a.createElement("div",{className:"c-body"},c.a.createElement(x,null)),c.a.createElement(B,null)))}}}]);
//# sourceMappingURL=3.783204bd.chunk.js.map