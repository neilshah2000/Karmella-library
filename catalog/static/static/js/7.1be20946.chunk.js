(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[7],{620:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return s}));var a=n(624),l=n.n(a);function r(e){var t="/catalog/api/books/";return t=function(e,t){var n=window.location.origin+e;console.log(n);var a=new URL(n);return Object.keys(t).forEach((function(e){a.searchParams.append(e,t[e])})),a}(t,e),fetch(t).then((function(e){return e.json()}))}function c(e){return fetch("/catalog/api/books/"+e).then((function(e){return e.json()}))}function o(e){var t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-CSRFTOKEN":l.a.get("csrftoken")}};return fetch("/catalog/api/books/",t).then((function(e){return e.json()}))}function i(e){var t="/catalog/api/books/"+e.id+"/",n={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-CSRFTOKEN":l.a.get("csrftoken")}};return fetch(t,n).then((function(e){return e.json()}))}function u(){return fetch("/catalog/api/authors/").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return e.value=e.id,e.key=e.id,e.label=e.first_name+" "+e.last_name,e}))}))}function s(){return fetch("/catalog/api/shelves/").then((function(e){return e.json()}))}},649:function(e,t,n){"use strict";n.r(t);var a=n(618),l=n.n(a),r=n(619),c=n(617),o=n(1),i=n.n(o),u=n(19),s=n(638),m=n(639),h=function(e){var t=e.options,n=e.children,a=e.maxHeight,l=(0,e.getValue)(),r=Object(c.a)(l,1)[0],o=35*t.indexOf(r);return i.a.createElement(m.a,{height:a,itemCount:n.length,itemSize:35,initialScrollOffset:o},(function(e){var t=e.index,a=e.style;return i.a.createElement("div",{style:a},n[t])}))},f=n(616),d=n(615),p=n(620);t.default=function(e){var t=Object(u.h)(),n=Object(o.useState)({title:"",titleShort:"",isbn:"",callNumber:"",language:"",pages:"",publisher:"",publisherPlace:"",issued:"",collectionTitle:"",place:"",abstract:""}),a=Object(c.a)(n,2),m=a[0],b=a[1],E=Object(o.useState)([]),g=Object(c.a)(E,2),v=g[0],y=g[1],j=Object(o.useState)([]),O=Object(c.a)(j,2),C=O[0],S=O[1];function k(e){var t=e.target.id,n=e.target.value,a=JSON.parse(JSON.stringify(m));a[t]=n,b(a)}return Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var n,a,r,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=13;break}return e.next=3,Promise.all([Object(p.b)(),Object(p.c)(t.id)]);case 3:n=e.sent,a=Object(c.a)(n,2),r=a[0],o=a[1],b(o),y(r),i=r.filter((function(e){return o.author.includes(e.id)})),S(i),e.next=17;break;case 13:return e.next=15,Object(p.b)();case 15:u=e.sent,y(u);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),i.a.createElement(i.a.Fragment,null,i.a.createElement(f.H,null,i.a.createElement(f.j,null,i.a.createElement(f.e,null,i.a.createElement(f.i,null,"Create Book"),i.a.createElement(f.f,null,i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"title"},"Authors"),i.a.createElement(s.a,{components:{MenuList:h},onChange:function(e){S(e)},value:C,options:v,isMulti:!0})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"title"},"Title"),i.a.createElement(f.y,{id:"title",placeholder:"Book title",onChange:k,value:m.title||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"titleShort"},"Short Title"),i.a.createElement(f.y,{id:"titleShort",placeholder:"Short title",onChange:k,value:m.titleShort||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"isbn"},"ISBN"),i.a.createElement(f.y,{id:"isbn",placeholder:"978-1-86197-876-9",onChange:k,value:m.isbn||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"callNumber"},"Call Number"),i.a.createElement(f.y,{id:"callNumber",placeholder:"",onChange:k,value:m.callNumber||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"language"},"Language"),i.a.createElement(f.y,{id:"language",placeholder:"es",onChange:k,value:m.language||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"pages"},"Pages"),i.a.createElement(f.y,{id:"pages",placeholder:"",onChange:k,value:m.pages||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"publisher"},"Publisher"),i.a.createElement(f.y,{id:"publisher",placeholder:"",onChange:k,value:m.publisher||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"publisherPlace"},"Publisher Place"),i.a.createElement(f.y,{id:"publisherPlace",placeholder:"",onChange:k,value:m.publisherPlace||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"issued"},"Issued"),i.a.createElement(f.y,{id:"issued",placeholder:"",onChange:k,value:m.issued||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"collectionTitle"},"Collection Title"),i.a.createElement(f.y,{id:"collectionTitle",placeholder:"",onChange:k,value:m.collectionTitle||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"place"},"Place"),i.a.createElement(f.y,{id:"place",placeholder:"",onChange:k,value:m.place||""})),i.a.createElement(f.t,null,i.a.createElement(f.D,{htmlFor:"abstract"},"Abstract"),i.a.createElement(f.R,{name:"abstract",id:"abstract",rows:"10",placeholder:"Content...",onChange:k,value:m.abstract||""}))),i.a.createElement(f.g,null,i.a.createElement("span",{className:"mr-2"},i.a.createElement(f.d,{type:"submit",size:"sm",color:"primary",onClick:function(){m.author=C.map((function(e){return e.key})),t.id?Object(p.f)(m).then((function(e){console.log(e)})):Object(p.a)(m).then((function(e){console.log(e)}))}},i.a.createElement(d.a,{name:"cil-scrubber"})," Submit")),i.a.createElement(f.d,{type:"reset",size:"sm",color:"danger",onClick:function(){console.log("test")}},i.a.createElement(d.a,{name:"cil-ban"})," Reset"))))))}}}]);
//# sourceMappingURL=7.1be20946.chunk.js.map