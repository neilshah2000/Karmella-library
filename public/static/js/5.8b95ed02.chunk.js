(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[5],{670:function(e,t,a){e.exports=a.p+"static/media/karmela.41a4104d.png"},682:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),c=a(651),o=a(657),i=a.n(o),u=a(658),s=a(653),m=a(652);var d=a(41),h=a.n(d);function p(e){var t="/catalog/api/books/";return t=function(e,t){var a=window.location.origin+e;console.log(a);var n=new URL(a);return Object.keys(t).forEach((function(e){n.searchParams.append(e,t[e])})),n}(t,e),h.a.get(t).then((function(e){return e.data}))}function E(e){var t="/catalog/api/books/"+e;return h.a.get(t).then((function(e){return e.data}))}function b(){return h.a.get("/catalog/api/authors/").then((function(e){return e.data})).then((function(e){return e.map((function(e){return e.value=e.id,e.key=e.id,e.label=e.first_name+" "+e.last_name,e}))}))}var f=a(163),g=function(e){var t=Object(f.b)();return r.a.createElement(c.e,{accentColor:"primary"},r.a.createElement(c.i,null,r.a.createElement("h5",null,e.book.title)),r.a.createElement(c.f,null,e.book.author_names),r.a.createElement(c.g,null,r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement("div",null,"Copies: ",e.book.copies.length),r.a.createElement("div",null,"Available: ",e.book.copies.filter((function(e){return"Available"===e.status})).length)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(c.C,{onClick:function(){(function(e){var t="/catalog/api/copies/"+e+"/checkout/";return h.a.post(t).then((function(e){return e.data}))})(e.book.copies[0].id).then((function(a){e.updated();t({type:"add-toast",toast:a})}))}},"Checkout")),r.a.createElement("div",null,r.a.createElement(c.C,{onClick:function(){(function(e){var t="/catalog/api/copies/"+e+"/reserve/";return h.a.post(t).then((function(e){return e.data}))})(e.book.copies[0].id).then((function(a){console.log(a),e.updated();t({type:"add-toast",toast:a})}))}},"Reserve"))))))},v=a(61),j=function(){var e=Object(n.useState)(1),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),d=Object(s.a)(o,2),E=d[0],b=d[1],f=Object(n.useState)(""),j=Object(s.a)(f,2),k=j[0],O=j[1],S=Object(n.useState)([]),w=Object(s.a)(S,2),C=w[0],N=w[1],y=Object(n.useState)(!1),x=Object(s.a)(y,2),B=x[0],F=x[1],P=Object(n.useState)(20),L=Object(s.a)(P,2),T=L[0],I=(L[1],Object(n.useState)(null)),J=Object(s.a)(I,2),R=J[0],_=J[1],z=function(e,t,a,r,l){var c=Object(n.useState)([]),o=Object(s.a)(c,2),m=o[0],d=o[1],h=Object(n.useState)(0),E=Object(s.a)(h,2),b=E[0],f=E[1],g=Object(n.useState)(1),v=Object(s.a)(g,2),j=v[0],k=v[1];function O(e){var t=e.author_names.join(", ");return e.authorNames=t,e}return Object(n.useEffect)((function(){!function(){var n=Object(u.a)(i.a.mark((function n(){var l,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l={limit:t,offset:t*e-t},r?l.shelf=r:l.search=a,n.next=4,p(l);case 4:c=n.sent,d(c.results.map(O)),f(c.count),k(Math.ceil(c.count/t));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e,t,a,r,l]),[m,b,j]}(a,T,E,B,R),A=Object(s.a)(z,3),M=A[0],H=A[1],U=A[2];function D(){console.log("bookupdated"),_(Math.random())}return Object(n.useEffect)((function(){!function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.get("/catalog/api/shelves/").then((function(e){return e.data})).then((function(e){e.push({id:!1,name:" -- select an option -- "}),N(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(c.F,null,r.a.createElement(c.j,null,r.a.createElement("h2",{className:"mb-4"},"Book Search"),r.a.createElement(c.F,null,r.a.createElement(c.j,{sm:"4"},r.a.createElement(c.x,{className:"mb-4"},r.a.createElement(c.z,null,r.a.createElement(c.d,{onClick:function(){F(!1),b(k)},type:"button",color:"primary"},r.a.createElement(m.a,{name:"cil-magnifying-glass"})," Search")),r.a.createElement(c.w,{placeholder:"Title or abstract",onChange:function(e){O(e.target.value)},value:k}))),r.a.createElement(c.j,{sm:"4"}),r.a.createElement(c.j,{sm:"4"},r.a.createElement(c.r,{row:!0},r.a.createElement(c.j,{md:"3"},r.a.createElement(c.B,{htmlFor:"shelfSelect",className:"pt-1"},"Shelf")),r.a.createElement(c.j,{xs:"12",md:"9"},r.a.createElement(c.G,{custom:!0,name:"shelfSelect",id:"shelfSelect",onChange:function(e){O(""),F(parseInt(e.target.value))},value:B},C.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}))))))),r.a.createElement(c.F,null,M.map((function(e){return r.a.createElement(c.j,{xs:"12",sm:"6",md:"4",key:e.id},r.a.createElement(g,{book:e,updated:D}))}))),r.a.createElement(c.d,{onClick:v.e},"logout"),r.a.createElement(c.D,{activePage:a,pages:U,onActivePageChange:l}),r.a.createElement("span",null,H+" results")))},k=a(671),O=a(672),S=function(e){var t=e.options,a=e.children,n=e.maxHeight,l=(0,e.getValue)(),c=Object(s.a)(l,1)[0],o=35*t.indexOf(c);return r.a.createElement(O.a,{height:n,itemCount:a.length,itemSize:35,initialScrollOffset:o},(function(e){var t=e.index,n=e.style;return r.a.createElement("div",{style:n},a[t])}))},w=function(e){var t=Object(l.i)(),a=Object(n.useState)({title:"",titleShort:"",isbn:"",callNumber:"",language:"",pages:"",publisher:"",publisherPlace:"",issued:"",collectionTitle:"",place:"",abstract:""}),o=Object(s.a)(a,2),d=o[0],p=o[1],f=Object(n.useState)([]),g=Object(s.a)(f,2),v=g[0],j=g[1],O=Object(n.useState)([]),w=Object(s.a)(O,2),C=w[0],N=w[1];function y(e){var t=e.target.id,a=e.target.value,n=JSON.parse(JSON.stringify(d));n[t]=a,p(n)}return Object(n.useEffect)((function(){!function(){var e=Object(u.a)(i.a.mark((function e(){var a,n,r,l,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=13;break}return e.next=3,Promise.all([b(),E(t.id)]);case 3:a=e.sent,n=Object(s.a)(a,2),r=n[0],l=n[1],p(l),j(r),c=r.filter((function(e){return l.author.includes(e.id)})),N(c),e.next=17;break;case 13:return e.next=15,b();case 15:o=e.sent,j(o);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.F,null,r.a.createElement(c.j,null,r.a.createElement("h2",{className:"mb-4"},"Create Book"),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"title"},"Authors"),r.a.createElement(k.a,{components:{MenuList:S},onChange:function(e){N(e)},value:C,options:v,isMulti:!0})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"title"},"Title"),r.a.createElement(c.w,{id:"title",placeholder:"Book title",onChange:y,value:d.title||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"titleShort"},"Short Title"),r.a.createElement(c.w,{id:"titleShort",placeholder:"Short title",onChange:y,value:d.titleShort||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"isbn"},"ISBN"),r.a.createElement(c.w,{id:"isbn",placeholder:"978-1-86197-876-9",onChange:y,value:d.isbn||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"callNumber"},"Call Number"),r.a.createElement(c.w,{id:"callNumber",placeholder:"",onChange:y,value:d.callNumber||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"language"},"Language"),r.a.createElement(c.w,{id:"language",placeholder:"es",onChange:y,value:d.language||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"pages"},"Pages"),r.a.createElement(c.w,{id:"pages",placeholder:"",onChange:y,value:d.pages||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"publisher"},"Publisher"),r.a.createElement(c.w,{id:"publisher",placeholder:"",onChange:y,value:d.publisher||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"publisherPlace"},"Publisher Place"),r.a.createElement(c.w,{id:"publisherPlace",placeholder:"",onChange:y,value:d.publisherPlace||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"issued"},"Issued"),r.a.createElement(c.w,{id:"issued",placeholder:"",onChange:y,value:d.issued||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"collectionTitle"},"Collection Title"),r.a.createElement(c.w,{id:"collectionTitle",placeholder:"",onChange:y,value:d.collectionTitle||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"place"},"Place"),r.a.createElement(c.w,{id:"place",placeholder:"",onChange:y,value:d.place||""})),r.a.createElement(c.r,null,r.a.createElement(c.B,{htmlFor:"abstract"},"Abstract"),r.a.createElement(c.M,{name:"abstract",id:"abstract",rows:"10",placeholder:"Content...",onChange:y,value:d.abstract||""})))),r.a.createElement(c.F,null,r.a.createElement(c.j,null,r.a.createElement("span",{className:"mr-2"},r.a.createElement(c.d,{type:"submit",size:"sm",color:"primary",onClick:function(){d.author=C.map((function(e){return e.key})),t.id?function(e){var t="/catalog/api/books/"+e.id+"/",a=JSON.stringify(e);return h.a.put(t,a).then((function(e){return e.data}))}(d).then((function(e){console.log(e)})):function(e){var t=JSON.stringify(e);return h.a.post("/catalog/api/books/",t).then((function(e){return e.data}))}(d).then((function(e){console.log(e)}))}},r.a.createElement(m.a,{name:"cil-scrubber"})," Submit")),r.a.createElement(c.d,{type:"reset",size:"sm",color:"danger",onClick:function(){console.log("test")}},r.a.createElement(m.a,{name:"cil-ban"})," Reset"))))},C={zIndex:9,top:"50%",right:"50%",marginTop:-16,marginRight:-16},N=function(){var e=Object(f.c)((function(e){return e.spinner}));return console.log(e),r.a.createElement(r.a.Fragment,null,e>0&&r.a.createElement("div",{className:"spinner-border text-primary position-fixed d-block",style:C,role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},y=function(e){var t=Object(f.c)((function(e){return e.toasts}));return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Q,{position:"bottom-right"},t.map((function(e,t){return r.a.createElement(c.N,{key:"toast"+t,show:!0,autohide:5e3,fade:!0},r.a.createElement(c.P,null,"Toast title"),r.a.createElement(c.O,null,e.status))}))))},x=a(388),B=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return console.log(t),r.a.createElement(l.b,Object.assign({},a,{render:function(e){return Object(v.d)()?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=r.a.createElement("div",{className:"pt-3 text-center"},r.a.createElement("div",{className:"sk-spinner sk-spinner-pulse"})),P=r.a.memo((function(){return r.a.createElement("main",{className:"c-main"},r.a.createElement(c.k,{fluid:!0},r.a.createElement(y,null),r.a.createElement(N,null),r.a.createElement(n.Suspense,{fallback:F},r.a.createElement(l.d,null,r.a.createElement(B,{exact:!0,path:"/bookSearch",name:"Book Search",component:j}),r.a.createElement(B,{exact:!0,path:"/book",name:"Book Create",component:w}),r.a.createElement(B,{exact:!0,path:"/bookEdit/:id",name:"Book Detail",component:w}),r.a.createElement(l.a,{from:"/",to:"/bookSearch"})))))})),L=r.a.memo((function(){return r.a.createElement(c.p,{fixed:!1},r.a.createElement("div",null,r.a.createElement("a",{href:"https://coreui.io",target:"_blank",rel:"noopener noreferrer"},"CoreUI"),r.a.createElement("span",{className:"ml-1"},"\xa9 2020 creativeLabs.")),r.a.createElement("div",{className:"mfs-auto"},r.a.createElement("span",{className:"mr-1"},"Powered by"),r.a.createElement("a",{href:"https://coreui.io/react",target:"_blank",rel:"noopener noreferrer"},"CoreUI for React")))})),T=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.sidebarShow})),a=Object(f.c)((function(e){return e.user}));return r.a.createElement(c.s,{withSubheader:!0},r.a.createElement(c.R,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(t)||"responsive";e({type:"set",sidebarShow:a})}}),r.a.createElement(c.R,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(t)&&"responsive";e({type:"set",sidebarShow:a})}}),r.a.createElement(c.t,{className:"mx-auto d-lg-none",to:"/"},r.a.createElement(m.a,{name:"logo",height:"48",alt:"Logo"})),r.a.createElement(c.u,{className:"d-md-down-none mr-auto"}),a&&a.email&&r.a.createElement(c.u,{className:"mr-5"},a.email))},I=a(670),J=a.n(I),R=a(164),_=r.a.memo((function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.sidebarShow})),a=Object(l.g)();return r.a.createElement(c.H,{show:t,onShowChange:function(t){return e({type:"set",sidebarShow:t})}},r.a.createElement(c.I,{className:"d-md-down-none white",to:"/"},r.a.createElement(c.v,{src:J.a,className:"c-sidebar-brand-full logo",alt:"admin@bootstrapmaster.com"})),r.a.createElement(c.K,null,r.a.createElement(c.L,{name:"Search",to:"/bookSearch",icon:"cil-search"}),r.a.createElement(c.L,{name:"Book",to:"/book",icon:"cil-book"}),r.a.createElement(c.L,{name:"Logout",onClick:function(){Object(R.d)().then((function(e){console.log(e),a.push("/login")}),(function(e){console.log(e)}))},icon:"cil-account-logout"})),r.a.createElement(c.J,{className:"c-d-md-down-none"}))}));t.default=function(){return r.a.createElement("div",{className:"c-app c-default-layout"},r.a.createElement(_,null),r.a.createElement("div",{className:"c-wrapper"},r.a.createElement(T,null),r.a.createElement("div",{className:"c-body"},r.a.createElement(P,null)),r.a.createElement(L,null)))}}}]);
//# sourceMappingURL=5.8b95ed02.chunk.js.map